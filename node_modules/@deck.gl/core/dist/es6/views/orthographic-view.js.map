{"version":3,"sources":["../../../src/views/orthographic-view.js"],"names":["View","Viewport","Matrix4","OrthographicController","OrthographicView","controller","_getControllerProps","type","_getViewport","x","y","width","height","viewState","offset","zoom","scale","Math","pow","props","eye","lookAt","up","left","top","right","bottom","near","far","id","viewMatrix","projectionMatrix","ortho","displayName"],"mappings":"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","sourcesContent":["import View from './view';\nimport Viewport from '../viewports/viewport';\n\nimport {Matrix4} from 'math.gl';\nimport OrthographicController from '../controllers/orthographic-controller';\n\nexport default class OrthographicView extends View {\n  get controller() {\n    return this._getControllerProps({\n      type: OrthographicController\n    });\n  }\n\n  _getViewport({x, y, width, height, viewState}) {\n    // Get view matrix parameters from view state\n    const {offset = [0, 0], zoom = 0} = viewState;\n\n    // Make sure Matrix4.ortho doesn't crash on 0 width/height\n    width = width || 1;\n    height = height || 1;\n\n    const scale = Math.pow(2, zoom);\n\n    // Get projection matrix parameters from the view itself\n    // NOTE: automatically calculated from width and height if not provided\n    const {\n      // view matrix arguments\n      eye = [0, 0, 1], // Defines eye position\n      lookAt = [0, 0, 0], // Which point is camera looking at, default origin\n      up = [0, 1, 0], // Defines up direction, default positive y axis,\n\n      // projection matrix arguments\n      left = (-width / 2 + offset[0]) / scale, // Left bound of the frustum\n      top = (-height / 2 + offset[1]) / scale, // Top bound of the frustum\n      right = (width / 2 + offset[0]) / scale, // Right bound of the frustum\n      bottom = (height / 2 + offset[1]) / scale, // Bottom bound of the frustum\n\n      near = 1, // Distance of near clipping plane\n      far = 100 // Distance of far clipping plane\n    } = this.props;\n\n    return new Viewport({\n      id: this.id,\n      x,\n      y,\n      width,\n      height,\n      viewMatrix: new Matrix4().lookAt({eye, lookAt, up}),\n      projectionMatrix: new Matrix4().ortho({left, right, bottom, top, near, far}),\n      zoom\n    });\n  }\n}\n\nOrthographicView.displayName = 'OrthographicView';\n"],"file":"orthographic-view.js"}