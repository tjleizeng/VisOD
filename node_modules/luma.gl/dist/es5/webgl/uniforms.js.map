{"version":3,"sources":["../../../src/webgl/uniforms.js"],"names":["UNIFORM_SETTERS","gl","location","value","uniform1fv","toFloatArray","uniform2fv","uniform3fv","uniform4fv","uniform1iv","toIntArray","uniform2iv","uniform3iv","uniform4iv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform1i","uniform1uiv","toUIntArray","uniform2uiv","uniform3uiv","uniform4uiv","uniformMatrix2x3fv","uniformMatrix2x4fv","uniformMatrix3x2fv","uniformMatrix3x4fv","uniformMatrix4x2fv","uniformMatrix4x3fv","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","array1","toTypedArray","uniformLength","Type","cache","Number","isFinite","length","log","warn","result","i","Float32Array","Int32Array","Uint32Array","parseUniformName","name","isArray","UNIFORM_NAME_REGEXP","matches","match","Error","Boolean","getUniformSetter","info","setter","type","bind","checkUniformValues","uniforms","source","uniformMap","uniformName","shouldCheck","checkUniformValue","console","error","Array","ArrayBuffer","isView","checkUniformArray","Texture","Sampler","Renderbuffer","Framebuffer","texture","checkLength","Math","min","areUniformsEqual","uniform1","uniform2","len","getUniformCopy","uniform","slice"],"mappings":"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","sourcesContent":["import Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport Sampler from './sampler';\nimport {log} from '../utils';\nimport GL from '../constants';\n\nconst UNIFORM_SETTERS = {\n  // WEBGL1\n\n  /* eslint-disable max-len */\n  [GL.FLOAT]: (gl, location, value) => gl.uniform1fv(location, toFloatArray(value, 1)),\n  [GL.FLOAT_VEC2]: (gl, location, value) => gl.uniform2fv(location, toFloatArray(value, 2)),\n  [GL.FLOAT_VEC3]: (gl, location, value) => gl.uniform3fv(location, toFloatArray(value, 3)),\n  [GL.FLOAT_VEC4]: (gl, location, value) => gl.uniform4fv(location, toFloatArray(value, 4)),\n\n  [GL.INT]: (gl, location, value) => gl.uniform1iv(location, toIntArray(value, 1)),\n  [GL.INT_VEC2]: (gl, location, value) => gl.uniform2iv(location, toIntArray(value, 2)),\n  [GL.INT_VEC3]: (gl, location, value) => gl.uniform3iv(location, toIntArray(value, 3)),\n  [GL.INT_VEC4]: (gl, location, value) => gl.uniform4iv(location, toIntArray(value, 4)),\n\n  [GL.BOOL]: (gl, location, value) => gl.uniform1iv(location, toIntArray(value, 1)),\n  [GL.BOOL_VEC2]: (gl, location, value) => gl.uniform2iv(location, toIntArray(value, 2)),\n  [GL.BOOL_VEC3]: (gl, location, value) => gl.uniform3iv(location, toIntArray(value, 3)),\n  [GL.BOOL_VEC4]: (gl, location, value) => gl.uniform4iv(location, toIntArray(value, 4)),\n\n  // uniformMatrix(false): don't transpose the matrix\n  [GL.FLOAT_MAT2]: (gl, location, value) =>\n    gl.uniformMatrix2fv(location, false, toFloatArray(value, 4)),\n  [GL.FLOAT_MAT3]: (gl, location, value) =>\n    gl.uniformMatrix3fv(location, false, toFloatArray(value, 9)),\n  [GL.FLOAT_MAT4]: (gl, location, value) =>\n    gl.uniformMatrix4fv(location, false, toFloatArray(value, 16)),\n\n  [GL.SAMPLER_2D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.SAMPLER_CUBE]: (gl, location, value) => gl.uniform1i(location, value),\n\n  // WEBGL2 - unsigned integers, irregular matrices, additional texture samplers\n\n  [GL.UNSIGNED_INT]: (gl, location, value) => gl.uniform1uiv(location, toUIntArray(value, 1)),\n  [GL.UNSIGNED_INT_VEC2]: (gl, location, value) => gl.uniform2uiv(location, toUIntArray(value, 2)),\n  [GL.UNSIGNED_INT_VEC3]: (gl, location, value) => gl.uniform3uiv(location, toUIntArray(value, 3)),\n  [GL.UNSIGNED_INT_VEC4]: (gl, location, value) => gl.uniform4uiv(location, toUIntArray(value, 4)),\n\n  // uniformMatrix(false): don't transpose the matrix\n  [GL.FLOAT_MAT2x3]: (gl, location, value) =>\n    gl.uniformMatrix2x3fv(location, false, toFloatArray(value, 6)),\n  [GL.FLOAT_MAT2x4]: (gl, location, value) =>\n    gl.uniformMatrix2x4fv(location, false, toFloatArray(value, 8)),\n  [GL.FLOAT_MAT3x2]: (gl, location, value) =>\n    gl.uniformMatrix3x2fv(location, false, toFloatArray(value, 6)),\n  [GL.FLOAT_MAT3x4]: (gl, location, value) =>\n    gl.uniformMatrix3x4fv(location, false, toFloatArray(value, 12)),\n  [GL.FLOAT_MAT4x2]: (gl, location, value) =>\n    gl.uniformMatrix4x2fv(location, false, toFloatArray(value, 8)),\n  [GL.FLOAT_MAT4x3]: (gl, location, value) =>\n    gl.uniformMatrix4x3fv(location, false, toFloatArray(value, 12)),\n\n  [GL.SAMPLER_3D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.SAMPLER_2D_SHADOW]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.SAMPLER_2D_ARRAY]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.SAMPLER_2D_ARRAY_SHADOW]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.SAMPLER_CUBE_SHADOW]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.INT_SAMPLER_2D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.INT_SAMPLER_3D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.INT_SAMPLER_CUBE]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.INT_SAMPLER_2D_ARRAY]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.UNSIGNED_INT_SAMPLER_2D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.UNSIGNED_INT_SAMPLER_3D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.UNSIGNED_INT_SAMPLER_CUBE]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL.UNSIGNED_INT_SAMPLER_2D_ARRAY]: (gl, location, value) => gl.uniform1i(location, value)\n  /* eslint-enable max-len */\n};\n\n// Pre-allocated typed arrays for temporary conversion\nconst FLOAT_ARRAY = {};\nconst INT_ARRAY = {};\nconst UINT_ARRAY = {};\n\nconst array1 = [0];\n\n// Functions to ensure the type of uniform values\n// TODO - Why is this necessary? The uniform*v funtions can consume Arrays\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  // convert boolean uniforms to Number\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n  const length = value.length;\n  if (length % uniformLength) {\n    log.warn(`Uniform size should be multiples of ${uniformLength}`, value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n  let result = cache[length];\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n  for (let i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function parseUniformName(name) {\n  // Shortcut to avoid redundant or bad matches\n  if (name[name.length - 1] !== ']') {\n    return {\n      name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  // if array name then clean the array brackets\n  const UNIFORM_NAME_REGEXP = /([^\\[]*)(\\[[0-9]+\\])?/;\n  const matches = name.match(UNIFORM_NAME_REGEXP);\n  if (!matches || matches.length < 2) {\n    throw new Error(`Failed to parse GLSL uniform name ${name}`);\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\n\n// Returns a Magic Uniform Setter\n/* eslint-disable complexity */\nexport function getUniformSetter(gl, location, info) {\n  const setter = UNIFORM_SETTERS[info.type];\n  if (!setter) {\n    throw new Error(`Unknown GLSL uniform type ${info.type}`);\n  }\n  return setter.bind(null, gl, location);\n}\n\n// Basic checks of uniform values (with or without knowledge of program)\n// To facilitate early detection of e.g. undefined values in JavaScript\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (const uniformName in uniforms) {\n    const value = uniforms[uniformName];\n    const shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n    if (shouldCheck && !checkUniformValue(value)) {\n      // Add space to source\n      source = source ? `${source} ` : '';\n      // Value could be unprintable so write the object on console\n      console.error(`${source} Bad uniform ${uniformName}`, value); // eslint-disable-line\n      /* eslint-enable no-console */\n      throw new Error(`${source} Bad uniform ${uniformName}`);\n    }\n  }\n  return true;\n}\n\n// TODO use type information during validation\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  // Check if single value is a number\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture || value instanceof Sampler) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n  return false;\n}\n\nfunction checkUniformArray(value) {\n  // Check that every element in array is a number, and at least 1 element\n  if (value.length === 0) {\n    return false;\n  }\n\n  const checkLength = Math.min(value.length, 16);\n\n  for (let i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Given two values of a uniform, returns `true` if they are equal\n */\nexport function areUniformsEqual(uniform1, uniform2) {\n  if (Array.isArray(uniform1) || ArrayBuffer.isView(uniform1)) {\n    if (!uniform2) {\n      return false;\n    }\n    const len = uniform1.length;\n    if (uniform2.length !== len) {\n      return false;\n    }\n    for (let i = 0; i < len; i++) {\n      if (uniform1[i] !== uniform2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return uniform1 === uniform2;\n}\n\n/**\n * Creates a copy of the uniform\n */\nexport function getUniformCopy(uniform) {\n  if (Array.isArray(uniform) || ArrayBuffer.isView(uniform)) {\n    return uniform.slice();\n  }\n  return uniform;\n}\n"],"file":"uniforms.js"}